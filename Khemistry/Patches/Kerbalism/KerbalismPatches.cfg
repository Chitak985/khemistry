//KerbalismConfig/System/ScienceRework/Groups/AtmosphericHarvesters.cfg
@PART[*]:HAS[@MODULE[Configure]:HAS[#title[Atmospheric?Harvester]]]:NEEDS[FeatureScience|Kerbalism]:FINAL
{
	@MODULE[Harvester]:HAS[#title[CO2 Filter]]
	{
		@resource = CO2
	}
  @MODULE[Harvester]:HAS[#title[Oxygen Filter]]
	{
		@resource = O2
	}
  @MODULE[Harvester]:HAS[#title[Nitrogen Filter]]
	{
		@resource = N2
	}
  @MODULE[Harvester]:HAS[#title[Ammonia Filter]]
	{
		@resource = NH3
	}
  @MODULE[Harvester]:HAS[#title[CO2 Filter]]
	{
		@resource = CO2
	}
  @MODULE[Configure]:HAS[#title[Atmospheric?Harvester]]
	{
		%slots = 1

		@SETUP[CO2 Filter]
		{
			@MODULE
			{
				@id_value = CO2
			}
		}

		@SETUP[oxygen Filter]
		{
			@MODULE
			{
				@id_value = O2
			}
		}

		@SETUP[Nitrogen Filter]
		{
			@MODULE
			{
				@id_value = N2
			}
		}

		@SETUP[Ammonia Filter]
		{
			@MODULE
			{
				@id_value = NH3
			}
		}
	}
}

//KerbalismConfig/ResourceConfigs
@PART[SurfaceScanner]:NEEDS[Kerbalism]:FINAL
{
	@MODULE[ModuleResourceScanner]:HAS[#ResourceName[Ammonia]]
	{
		@ResourceName = NH3
	}
}
@PLANETARY_RESOURCE,*:HAS[#ResourceName[Ammonia]]:NEEDS[Kerbalism]:FINAL
{
  @ResourceName = NH3
}
@PART[SurfaceScanner]:NEEDS[Kerbalism]:FINAL
{
	@MODULE[ModuleResourceScanner]:HAS[#ResourceName[Nitrogen]]
	{
		@ResourceName = N2
	}
}
@PLANETARY_RESOURCE,*:HAS[#ResourceName[Nitrogen]]:NEEDS[Kerbalism]:FINAL
{
  @ResourceName = NH3
}

// Since B9 Part Switch is a dependency of Khemistry, I assume Kerbalism will just use B9 tank modules instead. So lets patch em
@B9_TANK_TYPE[Food]:NEEDS[Kerbalism]:FINAL
{
	@RESOURCE[Food]
	{
		@name = PackagedMeals
	}
}

