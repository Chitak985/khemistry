$Kopernicus:FINAL
{
  _| = FakeKopernicus
}

// The following two nodes are copy-pasted for each MaxBodyProcessed
$FakeKopernicus:HAS[Body]:FINAL
{
  name = #$Body,0/name$Soil
  !Body,* {}
  |_ = FakeKopernicus2
}
@FakeKopernicus:HAS[Body]:FINAL
{
  !Body,0 {}
}
//------------------------------------------------------------------

// The following two nodes are copy-pasted for each MaxBodyProcessed
$FakeKopernicus:HAS[Body]:FINAL
{
  name = #$Body,0/name$Soil
  !Body,* {}
  |_ = FakeKopernicus2
}
@FakeKopernicus:HAS[Body]:FINAL
{
  !Body,0 {}
}
//------------------------------------------------------------------

!FakeKopernicus,* {}  //Delete all Body buffers (all just in case)

$FakeKopernicus2,*  //RESOURCE_DEFINITION
{
  displayName = Raw #$name$
	abbreviation = #$name$
  density = 1
	unitCost = 1000
	isTweakable = true
	isVisible = true
	flowMode = STAGE_PRIORITY_FLOW
	transfer = PUMP
	volume = 1
	noMagnetic = true
  |_ = RESOURCE_DEFINITION
}

$FakeKopernicus2,*  //B9_TANK_TYPE
{
  RESOURCE
	{
		name = #$../name$
		unitsPerVolume = 1
	}
  tankMass = 0.1
	tankCost = 1
	noMagnetic = true
  |_ = B9_TANK_TYPE
}

// TEMPORARY:
@PART[SmallTank,LargeTank,RadialOreTank]
{
  -RESOURCE,* { }
  MODULE
  {
    name = ModuleB9PartSwitch
    moduleID = cargoSwitch
    switcherDescription = Switch Soil Type
    baseVolume = 300
    switchInFlight = True
    affectDragCubes = false

    SUBTYPE
    {
      name = #$*@FakeKopernicus2,0[name]$
      tankType = #$*@FakeKopernicus2,0[name]$
      title = Raw #$*@FakeKopernicus2,0[name]$
    }
    SUBTYPE
    {
      name = #$*@FakeKopernicus2,1[name]$
      tankType = #$*@FakeKopernicus2,1[name]$
      title = Raw #$*@FakeKopernicus2,1[name]$
    }
    SUBTYPE
    {
      name = #$*@FakeKopernicus2,2[name]$
      tankType = #$*@FakeKopernicus2,2[name]$
      title = Raw #$*@FakeKopernicus2,2[name]$
    }
    SUBTYPE
    {
      name = #$*@FakeKopernicus2,3[name]$
      tankType = #$*@FakeKopernicus2,3[name]$
      title = Raw #$*@FakeKopernicus2,3[name]$
    }
  }
}
//----------------

!FakeKopernicus2,*  //Clean up
