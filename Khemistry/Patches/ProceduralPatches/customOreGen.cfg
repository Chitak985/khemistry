// WARNING! Custom pressurized air types are not yet stored anywhere as they need a special tank and cannot use normal cargo tanks.

///// ----- PREPARATIONS ----- /////
// Prepare Stock patches
@PART[RadialOreTank]:FINAL
{
	-RESOURCE,* { }
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = oreSwitch
		switcherDescription = Switch ore type
		baseVolume = 75
	}
}
@PART[SmallTank]:FINAL
{
	-RESOURCE,* { }
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = oreSwitch
		switcherDescription = Switch ore type
		baseVolume = 300
	}
}
@PART[LargeTank]:FINAL
{
	-RESOURCE,* { }
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = oreSwitch
		switcherDescription = Switch ore type
		baseVolume = 1500
	}
}

// Prepare SSPX patches
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:NEEDS[StationPartsExpansionRedux]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		!SUBTYPE,* {}
	}
}

// Prepare resource and tank types defintions
RESOURCE_DEFINITION
{
	name = DummyT
	density = 1
	unitCost = 1000
	isTweakable = true
	isVisible = true
	flowMode = STAGE_PRIORITY_FLOW
	transfer = PUMP
	volume = 1
	noMagnetic = true
}
B9_TANK_TYPE
{
	noMagnetic = true
	tankMass = 0.1
	tankCost = 1
	noMagnetic = true
	name = DummyT
	needsFixing = true
}
PLANETARY_RESOURCE
{
	ResourceName = DummyT
	ResourceType = 0
	Distribution
	{
		PresenceChance = 100
		MinAbundance = 1
		MaxAbundance = 2
		MinAltitude = 0.8
		MaxAltitude = 3
		MinRange = 0.3
		MaxRange = 0.5
		Variance = 50
	}
}
SPACEDUST_RESOURCE
{
	resourceName = DummyAirT
	RESOURCEBAND
	{
		alwaysDiscovered = true
		alwaysIdentified = true
		bandType = Exosphere
		minAbundance = 0.001225
		maxAbundance = 0.000825
		alwaysDiscovered = true
		alwaysIdentified = false
		remoteDiscoveryScale = 1.0
		useAirDensity = True
		densityCurve
		{
			key = 0 0
			key = 1 1
			key = 12 12
		}
		distributionType = Spherical
		altUpperBound = 70
		altLowerBound = 0
		altPeak = 0
		altVariability = 0
		altFalloffType = Linear
		latUpperBound = 90
		latLowerBound = -90
		latPeak = 0
		latVariability = 0
		latFalloffType = None
	}
}

// Create a copy of Kopernicus so it can be modified freely without affecting the actual Body list
$Kopernicus:FINAL
{
	@name = Dummy
	!useOnDemand
}

////////// COPY-PASTED ELEMENTS UP NEXT //////////  (Total: )

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

// --------------- The following nodes are copy-pasted for each MaxBodyProcessed ---------------
@Kopernics[Dummy]:FINAL
{
	bodyName = #$Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil             // #$/@Kopernicus/Body,0/name$
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil  // or #$@Kopernicus/Body,0/name$
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Soil      // or #$Kopernicus/Body,0/name$
}
$RESOURCE_DEFINITION[DummyT]:FINAL                  // Copy the template for RESOURCE_DEFINITION
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	displayName = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Air
	abbreviation = #$/@Kopernicus[Dummy]/Body,0/name$Air
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
		unitsPerVolume = 1
	}
}
$B9_TANK_TYPE[DummyT]:FINAL                                // Copy the template for B9_TANK_TYPE
{
	@name = #$/@Kopernicus[Dummy]/Body,0/name$Air
	RESOURCE
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Air
		unitsPerVolume = 1
	}
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Soil
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
}
$PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL // Copy the template for PLANETARY_RESOURCE
{
	@ResourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	PlanetName = #$/@Kopernicus[Dummy]/Body,0/name$
	@ResourceType = 2
}
                                                     // Copy the template for SPACEDUST_RESOURCE
$SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL
{
	@resourceName = #$/@Kopernicus[Dummy]/Body,0/name$Air
	body = #$/@Kopernicus[Dummy]/Body,0/name$
	@RESOURCEBAND
	{
		name = #$/@Kopernicus[Dummy]/Body,0/name$Atmo
		title = #$/@Kopernicus[Dummy]/Body,0/name$ Atmosphere
	}
}

@PART[SmallTank,LargeTank,RadialOreTank]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}
@PART[sspx-cargo-container-25-1,sspx-cargo-container-25-2,sspx-cargo-container-25-3,sspx-cargo-container-375-1,sspx-cargo-container-375-2,sspx-cargo-container-375-3,sspx-cargo-container-radial-huge-1,sspx-cargo-container-radial-huge-2,sspx-cargo-container-radial-medium-1,sspx-cargo-container-radial-medium-2,sspx-cargo-container-radial-medium-3,sspx-cargo-container-radial-small-1,sspx-cargo-container-radial-small-2,sspx-cargo-container-radial-small-3]:FINAL
{
	@MODULE[ModuleB9PartSwitch]
	{
		SUBTYPE
		{
			name = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			tankType = #$/@Kopernicus[Dummy]/Body,0/name$Soil
			title = Raw #$/@Kopernicus[Dummy]/Body,0/name$ Soil
		}
	}
}

@Kopernicus[Dummy]:FINAL
{
	!Body,0 {}                                                      // Delete the processed Body
}

// --------------------------------------------------------------------------------------------

////////// COPY-PASTED ELEMENTS END //////////

!Kopernicus[Dummy]:FINAL {}  //Delete the no longer needed safe Body list

// Delete all resource and tank type definition templates
!RESOURCE_DEFINITION[DummyT]:FINAL {}
!RESOURCE_DEFINITION[DummyT]:FINAL {}
!B9_TANK_TYPE[DummyT]:FINAL {}
!B9_TANK_TYPE[DummyT]:FINAL {}
!PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL {}
!PLANETARY_RESOURCE:HAS[#ResourceName[DummyT]]:FINAL {}
!SPACEDUST_RESOURCE:HAS[#resourceName[DummyAirT]]:FINAL {}